name: ai-json-operator
type: shell
description: AI JSON operator tool for generating ONNX models
parameters:
  ops:
    type: str
    required: true
    help: "Operations/graph pattern (e.g., 'Conv Add')"
  convert_to_onnx:
    type: bool
    default: true
    help: "Whether to add --convert-to-onnx flag"
  max_retries:
    type: int
    default: 3
    help: "Maximum retry attempts"
  output_dir:
    type: str
    default: "outputs"
    help: "Output directory for generated files"
command_template: >
  ai-json-operator "{{ ops }}"
  {% if convert_to_onnx %}--convert-to-onnx{% endif %}
  --max-retries {{ max_retries }}
  -o {{ output_dir }}
validation:
  exit_code: 0
  output_files_exist: ["{{ output_dir }}/**/*.onnx"]
post_exec:
  outputs:
    onnx_file: "find_onnx_file(dir='{{ output_dir }}')"
    onnx_dir: "find_onnx_dir(dir='{{ output_dir }}')"